!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TypeCheck",[],e):"object"==typeof exports?exports.TypeCheck=e():t.TypeCheck=e()}(self,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{_tc:()=>R,_tcx:()=>U,default:()=>E,typeCheck:()=>E,validType:()=>_});const s={};(()=>{if("undefined"!=typeof window){const t={childList:!0,subtree:!0};new MutationObserver(((t,e)=>{for(const e of t)if("childList"===e.type)for(const t in s)s[t]()})).observe(document.body,t)}})();const n=function(){return"kn__"+(new Date).getTime()+"__"+Math.floor(899*Math.random())};function i(t){return null==t||("string"==typeof t||Array.isArray(t)?0===t.length:t instanceof Map||t instanceof Set?0===t.size:ArrayBuffer.isView(t)?0===t.byteLength:"object"==typeof t&&0===Object.keys(t).length)}function r(t){const e=typeof t;switch(t){case null:case void 0:case"":return null;case"0":case 0:return 0;default:if(!("number"!==e&&"string"!==e||"number"!=typeof t&&Number.isNaN(Number(t))))return+t}return null}function o(t,e){if(null===t)return e?null===e||"null"===e:"null";let s;switch(typeof t){case"number":case"string":case"boolean":case"undefined":case"bigint":case"symbol":case"function":s=typeof t;break;case"object":s=Array.isArray(t)?"array":"object";break;default:s="unknown"}return e?e===s:s}function l(t,...e){if(t)return"string"!=typeof t?t:e.reduce(((t,e)=>{const s=e instanceof RegExp?e:new RegExp((n=e)instanceof RegExp?n:n.split("").map((t=>["$","^",".","*","+","?","(",")","[","]","{","}","|","\\"].includes(t)?`\\${t}`:t)).join(""));var n;return t.replace(s,"")}),t).trim()}function c(t,e="[",s="]"){if("string"!=typeof t)return t;const n=t.lastIndexOf(e);if(-1===n)return null;const i=t.substring(n),r=i.indexOf(s);return-1===r?null:i.substring(0,r+1)}function u(t,e=","){if("string"!=typeof t)return t;if(i(t))return[];let s=(t=l(t)).split(e).map((t=>l(t)));return 1===s.length&&""===s[0]?[t]:s}function a(t){return"string"!=typeof t?t:t.replace(/\`|'|"/g,"")}function h(t,e=null,s=null){return(!e||t.startsWith(e))&&(!s||t.endsWith(s))}const f=function t(e){if(o(e,"object")||o(e,"array"))return e;const s=h(e,"{","}"),l=h(e,"[","]");if(!s&&!l)return e;const f=s?{}:[],p={};let y=function(t){const e=t.match(/^(\[|\{)(.*?)(\]|\})$/);return e?e[2].trim():t}(e);const b=(t=!1)=>{for(;;){let e=t?c(y,"{","}"):c(y);if(!e)break;let s=`__${n()}__`;p[s]=e,y=y.replace(e,s)}};return b(),b(!0),u(y).forEach(((e,n)=>{const o=e.includes(":")&&s,l=o?u(e,":"):[],c=a(function(t,e=null){return null!==r(t)||"boolean"==typeof t?t:i(t)?e:t}(l[0],n));(e=o?l[1]:e)in p&&(e=t(p[e])),e=function(t){const e=r(t);return null!==e?e:t}(a(e)),s?f[c]=e:f.push(e)})),f},p=h,y=i,b=o,d=new Map([["array",t=>b(t,"array")],["bigInt",t=>"bigint"==typeof t],["boolean",t=>"boolean"==typeof t],["date",t=>t instanceof Date],["float",t=>"number"==typeof t&&!Number.isInteger(t)],["function",t=>"function"==typeof t],["int",t=>Number.isInteger(t)],["map",t=>t instanceof Map],["null",t=>null===t],["number",t=>"number"==typeof t],["object",t=>b(t,"object")],["promise",t=>t instanceof Promise],["regExp",t=>t instanceof RegExp],["set",t=>t instanceof Set],["string",t=>"string"==typeof t],["symbol",t=>"symbol"==typeof t],["undefined",t=>void 0===t],["weakMap",t=>t instanceof WeakMap],["weakSet",t=>t instanceof WeakSet]]),g=new Map,O=new Map;function w(t){throw new Error(`Type Error: "${t}" is not supported`)}function j(t){if(b(t,"array")||b(t,"object"))return b(t);const e=t.trim();return p(e,"[","]")?"array":p(e,"{","}")?"object":"basic"}const k=t=>new class{constructor(){return this.testUnit=new Map([["tests",new Map],["optionalKeys",[]],["testFew",[]],["testAllAny",!1],["testOnly",!1]]),this.handleObject()}checkOptionalKey(t){return t.endsWith("?")&&(t=t.slice(0,-1),this.testUnit.get("optionalKeys").push(t)),t}checkTheAnyKey(t){if("any"in t){const e=Object.keys(t);1===e.length?this.testUnit.set("testAllAny",!0):this.testUnit.set("testFew",e.filter((t=>"any"!==t)))}}handleObject(){const e=f(t);this.checkTheAnyKey(e);for(const t in e){const s=this.checkOptionalKey(t),n=e[t];"..."!==n?this.testUnit.get("tests").set(s,m(n)):(delete e[t],this.testUnit.set("testOnly",!0))}return this.testUnit}};function m(t){if(g.has(t))return g.get(t);let e=new Map([["testMethod",j(t)],["tests",null]]);switch(e.get("testMethod")){case"basic":e.set("tests",(s=t,O.has(s)?O.get(s):s.split("|").reduce(((t,e)=>{let n=!1,i=e.trim();i.endsWith("?")&&(i=i.slice(0,-1),n=!0);const r=d.get(i)??w(i);return r&&t.push(r),n&&t.push(d.get("null"),d.get("undefined")),O.set(s,t),t}),[])));break;case"array":e.set("tests",(t=>{const e=[];return f(t).forEach((t=>{e.push(m(t))})),e})(t));break;case"object":const n=k(t);e=new Map([...e,...n]);break;default:w(t)}var s;return g.set(t,e),e}const v=[],A=new Map;class M{constructor(t,e){const{testOnly:s,testFew:n,testAllAny:i,optionalKeys:r,tests:o}=[...e.entries()].reduce(((t,[e,s])=>({...t,[e]:s})),{});this.testUnitKeys=[...o.keys()],this.testOnly=s,this.testFew=n,this.testAllAny=i,this.optionalKeys=r,this.testCollection=o,this.inputObject=t}handleUnitTest(){switch(!0){case this.testAllAny:return this.testObjAllAny();case!y(this.testFew):const t=this.testObjFew();return this.filterOutFew(),t&&this.testObjAllAny();case!y(this.optionalKeys):const e=this.testObjOptionalKeys();return this.filterOutOptionalKeys(),e&&this.defaultTest();case!this.testOnly:for(const t in this.inputObject)if(!this.testCollection.has(t))return!1}return this.defaultTest()}filterOutOptionalKeys(){this.testUnitKeys=this.testUnitKeys.filter((t=>!this.optionalKeys.includes(t)))}filterOutFew(){this.inputObject=Object.fromEntries(Object.entries(this.inputObject).filter((([t])=>!this.testFew.includes(t))))}testObjOptionalKeys(){return this.optionalKeys.every((t=>{const e=this.testCollection.get(t),s=this.inputObject[t];return!s||K(s,e)}))}testObjFew(){return this.testFew.every((t=>{const e=this.testCollection.get(t);return K(this.inputObject[t],e)}))}testObjAllAny(){return Object.values(this.inputObject).every((t=>K(t,this.testCollection.get("any"))))}defaultTest(){return this.testUnitKeys.every((t=>{const e=this.testCollection.get(t);return K(this.inputObject[t],e)}))}}const T=(t,e)=>!!b(t,"object")&&new M(t,e).handleUnitTest();function K(t,e){const s=e.get("testMethod"),n=e.get("tests");switch(s){case"basic":return((t,e)=>e.some((s=>{const n=s(t);return n||v.push({value:t,tests:e}),n})))(t,n);case"array":return((t,e)=>!!b(t,"array")&&e.every(((e,s)=>K(t[s],e))))(t,n);case"object":return T(t,e);default:return!1}}function x(t){if(t){if(A.has(t))return A.get(t);let e=null;switch(typeof t){case"function":e={callback:t};break;case"object":e=t;break;case"string":switch(t){case"log":e={log:!0};break;case"fail":e={fail:!0};break;case"return":e={return:!0};break;case"validOutput":e={validOutput:t}}}return A.set(t,e),e}return{log:!1,fail:!1,return:!1,validOutput:!1,callback:null}}const E=(t,e,s)=>new class{constructor(){this.unitTest=m(t),this.testResult=K(e,this.unitTest),this.bool=this.testResult,this.settings=x(s),this.callback=this.settings.callback??null,this.testData={typeExp:t,inputVal:e,callback:this.callback,unitTest:this.unitTest,testResult:this.testResult},this.settings.log&&this.log(),this.settings.fail&&this.fail(),this.callback&&this.callback(this.testData)}test(){return this.testResult}log(){return console.table(this.testData),this}fail(){return this.testResult?this:function(){const t=v[v.length-1];throw console.log(v),v.length=0,new Error(`Type Error: "${t.value}" is not valid, see log console for details`)}()}return(){return e}},R=(t,e,s)=>(...n)=>(E(t,n,s),e(...n)),U=(t,e,s)=>{const n=x(s);return(...s)=>new class{constructor(){return this.args=s,this.testResults=E(t,s,n),this.default()}default(){this.returns=e(...s);const t=n.validOutput??!1;return t&&E(t,this.returns,"fail"),this}log(){return this.testResults.log(),this}fail(){return this.testResults.fail(),this}return(){return this.returns}}},_=(t,e)=>E(t,e).fail().test();return e})()));